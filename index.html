<!DOCTYPE html>
<html>
  <head>
    <title>My first Three.js app</title>
    <style>
      canvas {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <script src="./js/three.js"></script>
    <script>
      var scene = new THREE.Scene()

      var camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        1,
        10000,
      )

      

      // LIGHTS
      ambientLight = new THREE.AmbientLight(0xffffff, 0.5)
      scene.add(ambientLight)
      light = new THREE.PointLight(0xffffff, 0.8, 100)
      light.position.set(0, 10, 20)
      light.castShadow = true
      // Will not light anything closer than 0.1 units or further than 25 units
      light.shadow.camera.near = 0.1
      light.shadow.camera.far = 25
      scene.add(light)
      var renderer = new THREE.WebGLRenderer()
      renderer.setSize(window.innerWidth, window.innerHeight)
      document.body.appendChild(renderer.domElement)

      function addBasicCube() {
        var geometry = new THREE.BoxGeometry(7, 7, 7, 0.1, 0.1, 0.1)
        var material = new THREE.MeshPhongMaterial({
          color: 0xff0000,
        })
        var cube = new THREE.Mesh(geometry, material)
        cube.receiveShadow = true
        cube.castShadow = true
        scene.add(cube)
      }

      function addArmWithPivot(pos_x, pos_y, pos_z, scale_x, scale_y, scale_z) {
        //add arm
        var geometry = new THREE.BoxGeometry(
          scale_x,
          scale_y,
          scale_z,
        )
        geometry.translate(scale_x / 2, 0, 0)
        var material = new THREE.MeshPhongMaterial({ color: 0xff0000 })
        var cube = new THREE.Mesh(geometry, material)
        cube.receiveShadow = true
        cube.castShadow = true
        cube.position.x = pos_x
        cube.position.y = pos_y
        cube.position.z = pos_z
        cube.name = 'arm2'

        scene.add(cube)

        cube.rotation.z = Math.PI /2

       /* var pivot = new THREE.Object3D;
        var geometry_pivot_debug = new THREE.BoxGeometry(
          1,
          1,
          1,
        )
        
        var material_pivot_debug = new THREE.MeshPhongMaterial({
          color: 0xffff00,
        })
        var pivot_debug = new THREE.Mesh(
          geometry_pivot_debug,
          material_pivot_debug,
        )
        pivot_debug.position.z = 1
        scene.add(pivot_debug)
       //var pivot_debug = new THREE.Object3D()
        pivot_debug.position.x = cube.position.x
        //pivot_debug.position.x = cube.position.x + scale_x / 2
        pivot_debug.position.y = pos_y 
        cube.position = pivot_debug.position
        pivot_debug.position.x = cube.position.x + scale_x / 2
        
        //pivot_debug.add(cube)
        pivot_debug.position.x = pivot_debug.position.x + 1
        pivot_debug.add(cube)
        
        console.log(pivot_debug.position)
        console.log(cube.position)
        
        pivot_debug.rotation.y = Math.PI
        
        //pivot_debug.rotation.y = Math.PI 
        

        //add pivot*/

      }
      addArmWithPivot(1, 1, 1, 35, 5, 5)
      camera.position.x = 20

      function getObjectByName(){
        var arm2 = scene.getObjectByName("arm2");
        arm2.rotation.x = Math.PI;

      }
      getObjectByName();
      

      function addArm(pos, lenght){
        var geometry = new THREE.BoxGeometry(
          lenght,
          5,
          5,
          pos.x,
          pos.y,
          pos.z
        )
        var material = new THREE.MeshPhongMaterial({ color: 0xff0000 })
        var cube = new THREE.Mesh(geometry, material)
        cube.receiveShadow = true
        cube.castShadow = true
        cube.position.x = pos.x
        cube.position.y = pos.y
        cube.position.z = pos.z

        scene.add(cube)
      }

      function rotatePivot(degree, axe, object){
        var pivot_debug = new THREE.Object3D()

      }

     // addArm({x: 1, y: 10, z: 1}, 35)
      //(pos_x, pos_y, pos_z, scale_x, scale_y, scale_z)

      function camera_mover_debug() {
        //camera.position.x = camera.position.x + 20
      }

      camera.position.z = 40
      camera.position.y = 15
      //camera.rotation.x = -20;

      function render() {
        requestAnimationFrame(render)
        // Enable Shadows in the Renderer
        renderer.shadowMap.enabled = true
        renderer.shadowMap.type = THREE.BasicShadowMap
        renderer.render(scene, camera)
      }

      render()
      camera_mover_debug()
    </script>
  </body>
</html>
